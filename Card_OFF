# 1. Remova todo e qualquer resquício do driver proprietário da Nvidia.
  # Para Ubuntu e derivados:
    sudo apt autoremove --purge *nvidia*
  # Para Arch Linux e derivados:
    sudo pacman -Rns *nvidia*
  
# 2. Reinicie a máquina.

# 3. Descubra e anote os códigos referentes às conexões PCI.
  # Provavelmente haverá um para a placa de vídeo e outro para o chipset de áudio da placa de vídeo. Registre ambos.
    sudo lspci | grep NVIDIA
      # Para o meu exemplo:
        01:00.0 corresponde à placa de vídeo
        01:00.1 corresponde ao áudio da placa de vídeo
      
# 4. Instale o ACPI Call:
  # Para Ubuntu e derivados:
    sudo apt install acpi-call-dkms
  # Para Arch Linux e derivados:
    sudo pacman -S acpi_call-dkms
  
# 5. Rode o modprobe:
  sudo modprobe acpi_call

# 6. Teste as chamadas:
  # Para Ubuntu e derivados:
    sudo /usr/share/doc/acpi-call-dkms/examples/turn_off_gpu.sh
  # Para Arch Linux e derivados:
    sudo /usr/share/acpi_call/examples/turn_off_gpu.sh

# 7. Registre a que funcionou. Procure pelo final "works" e copie o código.
  # Por exemplo, no meu laptop seria \_SB.PCI0.PEG0.PEGP._OFF:
    Trying \_SB.PCI0.P0P1.VGA._OFF: failed
    Trying \_SB.PCI0.P0P2.VGA._OFF: failed
    Trying \_SB_.PCI0.OVGA.ATPX: failed
    Trying \_SB_.PCI0.OVGA.XTPX: failed
    Trying \_SB.PCI0.P0P3.PEGP._OFF: failed
    Trying \_SB.PCI0.P0P2.PEGP._OFF: failed
    Trying \_SB.PCI0.P0P1.PEGP._OFF: failed
    Trying \_SB.PCI0.MXR0.MXM0._OFF: failed
    Trying \_SB.PCI0.PEG1.GFX0._OFF: failed
    Trying \_SB.PCI0.PEG0.GFX0.DOFF: failed
    Trying \_SB.PCI0.PEG1.GFX0.DOFF: failed
    Trying \_SB.PCI0.PEG0.PEGP._OFF: works!
    Trying \_SB.PCI0.XVR0.Z01I.DGOF: failed
    Trying \_SB.PCI0.PEGR.GFX0._OFF: failed
    Trying \_SB.PCI0.PEG.VID._OFF: failed
    Trying \_SB.PCI0.PEG0.VID._OFF: failed
    Trying \_SB.PCI0.P0P2.DGPU._OFF: failed
    Trying \_SB.PCI0.P0P4.DGPU.DOFF: failed
    Trying \_SB.PCI0.IXVE.IGPU.DGOF: failed
    Trying \_SB.PCI0.RP00.VGA._PS3: failed
    Trying \_SB.PCI0.RP00.VGA.P3MO: failed
    Trying \_SB.PCI0.GFX0.DSM._T_0: failed
    Trying \_SB.PCI0.LPC.EC.PUBS._OFF: failed
    Trying \_SB.PCI0.P0P2.NVID._OFF: failed
    Trying \_SB.PCI0.P0P2.VGA.PX02: failed
    Trying \_SB_.PCI0.PEGP.DGFX._OFF: failed
    Trying \_SB_.PCI0.VGA.PX02: failed

# 8. Adicione o driver open source Nouveau à blacklist:
  # No exemplo, utilizarei o Gedit, mas você pode optar pelo editor de texto de sua preferência (como o Nano):
    sudo gedit /etc/modprobe.d/blacklist.conf
      #Adicione a linha:
       blacklist nouveau
    
# 9. Carregue o ACPI Call:
  sudo gedit /etc/modules
    # Adicione a linha:
      acpi_call
      
# 10. Desative a placa de vídeo:
  sudo gedit /etc/tmpfiles.d/acpi_call.conf
    # Adicione a linha (substitua o código pelo que você encontrou):
      w /proc/acpi/call - - - - \\_SB.PCI0.PEG0.PEGP._OFF
      
# 11. Reconstrua o initrams:
  sudo update-initramfs -u -k all
  
# 12. Reinicie o computador.

# 13. Para fins de estabilidade, tente remover as conexões.
  sudo echo 1 > /sys/bus/pci/devices/[código do PCI aqui]/remove
    # Para o meu exemplo (atenção à formatação):
      sudo echo 1 > /sys/bus/pci/devices/0000\:01\:00.0/remove
      sudo echo 1 > /sys/bus/pci/devices/0000\:01\:00.1/remove
      
# 14. Verifique se a placa da Nvidia sumiu do sistema (precisa ter sumido):
  sudo lspci | grep NVIDIA
  
# 15. Remova as conexões antes do boot:
  sudo gedit /etc/tmpfiles.d/remove_gpu_from_lspci.conf
    # Adicione as linhas:
      w /sys/bus/pci/devices/[código do PCI aqui]/remove - - - - 1
        # Para o meu exemplo:
          w /sys/bus/pci/devices/0000\:01\:00.0/remove - - - - 1
          w /sys/bus/pci/devices/0000\:01\:00.1/remove - - - - 1
          
# 16. Reconstrua o initrams:
  sudo update-initramfs -u -k all
  
# 17. Reinicie o computador e verifique se o aquecimento e o consumo de bateria reduziram.
